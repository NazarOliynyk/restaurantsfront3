<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

<nav class="navbar " style="background: rosybrown">
  <div class="container-fluid">
    <h4>Client Page</h4>
    <button (click)="createOrder()" class="btn btn-outline-success btn-lg">Create Order</button><br>
    <button (click)="goToOrders()" class="btn btn-outline-success btn-lg">My orders</button><br>

    <div class="w3-container">
      <div class="w3-dropdown-hover">
        <button class="w3-button w3-black">Account Settings</button>
        <div class="w3-dropdown-content w3-bar-block w3-border">
          <button class="w3-bar-item w3-button" (click)="showInitialData()" >Show my Data</button><br>
          <button class="w3-bar-item w3-button" (click)="showUpdate()" >Update my Data</button><br>
          <button class="w3-bar-item w3-button" (click)="changePasswordForm()" >Change Password</button><br>
          <button  class="w3-bar-item w3-button" (click)="deleteAccount()" style="color: red">Delete Account</button><br>
        </div>
      </div>
    </div>
  </div>

</nav>

<table *ngIf="showInitialInfo" class="initialData">
  <tr>
    <th>Login</th>
    <td>{{client.username}}</td>
  </tr>

  <tr>
    <th>Email</th>
    <td>{{client.email}}</td>
  </tr>

</table>

<form *ngIf="showUpdateForm" #formToBeUpdated="ngForm" class="updateForm">


  <label>Email:
    <input [ngModel]="client.email" [(ngModel)]="clientToUpdate.email" type="email"
           [ngStyle]="{border: emailRef.invalid && emailRef.dirty?
           '3px solid red': '1px solid black'}"
           ngModel
           #emailRef = 'ngModel'
           required email
           name="email" placeholder="email">
  </label><br>

  <button [disabled]="formToBeUpdated.invalid"
          (click)="updateClient(formToBeUpdated)" type="button">Save Changes</button>
</form>


<form *ngIf="changePasswordF" #changePasswordForm="ngForm" class="changePasForm">

  <label>Old Password:<br>
    <input [(ngModel)]="oldPassword" type="password" class="form-control"
           [ngStyle]="{border: OldPasswordRef.invalid && OldPasswordRef.dirty?
              '3px solid red': '3px solid green'}"
           ngModel
           #OldPasswordRef = 'ngModel'
           required minlength="4"
           name="password" placeholder="password" size="10"></label><br>

  <label>New Password:<br>
    <input [(ngModel)]="newPassword" type="password" class="form-control"
           [ngStyle]="{border: NewPasswordRef.invalid && NewPasswordRef.dirty?
              '3px solid red': '3px solid green'}"
           ngModel
           #NewPasswordRef = 'ngModel'
           required minlength="4"
           name="password" placeholder="password" size="10"></label><br>

  <button [disabled]="changePasswordForm.invalid"
          (click)="sendPassword(changePasswordForm)">SET NEW PASSWORD</button><br>

</form>

<div id="modalMessage1" class="modal">
  <div class="modal-response">
    <div>
      <h3>{{ responseOnDelete}}</h3>

    </div>
    <button class="btn btn-info" (click)="closeModal()">Close</button>
    <button *ngIf="deleteAnywayBTN" class="btn btn-danger" style="margin-left: 170px" (click)="deleteAnyway()">DELETE Anyway</button>
  </div>
</div>

<router-outlet></router-outlet>
